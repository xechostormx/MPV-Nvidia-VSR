# General Settings
profile=high-quality
vo=gpu-next
priority=high
gpu-api=d3d11  # Required for d3d11vpp/Nvidia VSR; switch to vulkan if VSR not needed (may break upscale)
fullscreen=yes
taskbar-progress=no
force-seekable=yes
keep-open=always
reset-on-next-file=pause
hwdec=d3d11va  # Use d3d11va-copy if you see decoding issues
dither-depth=8
scale-antiring=0.6

# Scalers and Shaders
scale=ewa_lanczossharp
dscale=mitchell
cscale=ewa_lanczossharp
gpu-shader-cache-dir=~~/shaders/cache

# Debanding (Toggle with 'd' key for banded videos)
deband=no
deband-iterations=2
deband-threshold=64
deband-range=17
deband-grain=12

# OSD and Controller
osd-bar=no
osc=no
border=no
cursor-autohide-fs-only=yes
cursor-autohide=300
osd-level=1
osd-duration=1000
hr-seek=yes
osd-font=Verdana
osd-font-size=20
osd-color=#FFFFFF
osd-border-color=#000000
osd-border-size=0.6
osd-blur=0.2

# Language Priority
alang=ja,jp,jpn,en,eng
slang=en,eng

# Audio
volume=100
audio-file-auto=fuzzy
volume-max=200
audio-pitch-correction=yes

# Subtitles
demuxer-mkv-subtitle-preroll=yes
sub-fix-timing=no
sub-auto=all
sub-font=Netflix Sans Medium
sub-font-size=40
sub-color=#FFFFFFFF
sub-border-color=#FF000000
sub-border-size=2.0
sub-shadow-offset=0
sub-spacing=0.0

# Screenshots
screenshot-format=png
screenshot-high-bit-depth=yes
screenshot-png-compression=1
screenshot-directory=~/Pictures/mpv-screenshots
screenshot-template=%f-%wH.%wM.%wS.%wT-#%#00n

# Auto Profiles
[WEB-DL]
profile-desc=WEB-DL Anime (HatSubs, SubsPlease, HorribleSubs, Erai-raws)
profile-cond=string.match(p.filename, "HatSubs")~=nil or string.match(p.filename, "SubsPlease")~=nil or string.match(p.filename, "HorribleSubs")~=nil or string.match(p.filename, "Erai%-raws")~=nil
deband=yes